<ion-header>
  <ion-navbar>
    <ion-title>Messages</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-list>
    <ion-item-sliding *ngFor="let msg of messages | reversePipe" #slidingItem>
      <ion-item (click)="enterChatPage(msg.$key, msg.isSystem, msg.isUnread)">
        <ion-thumbnail item-left>
          <img [src]="getPlayerInfo(msg.$key)?.photo">
        </ion-thumbnail>
        <h2>{{ getPlayerInfo(msg.$key)?.name }}</h2>
        <p>{{ msg.lastContent }}</p>
        <ion-note item-right text-right>
          <p>{{ msg.lastTimestamp | momentPipe }}</p>
          <ion-badge *ngIf="msg.isUnread" color="gBlue">New</ion-badge>
        </ion-note>
      </ion-item>
      <ion-item-options side="right">
        <button ion-button color="lightGrey" text-capitalize (click)="markAsRead(slidingItem)">
          Mark as Unread
        </button>
        <button ion-button color="danger" text-capitalize>
          Delete
        </button>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>
</ion-content>
