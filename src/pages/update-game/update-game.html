<ion-header>
  <ion-navbar>
    <ion-title>{{'updatematch' | trans}}</ion-title>
    <ion-buttons left>
      <button (click)="close()" color='danger' ion-button icon-only clear>
        <ion-icon name="close"></ion-icon>
      </button>
    </ion-buttons>
    <ion-buttons right>
      <button (click)="deleteMatch()" color="danger" ion-button icon-only clear>
        <ion-icon *ngIf='0 === updateState' name="trash"></ion-icon>
      </button>
      <button *ngIf='isShowSave()' [disabled]="!(match.type && matchDate && matchTime && match.location.address)" (click)="updateMatch()" color="primary"
        ion-button icon-only clear>
        <ion-icon name="cloud-upload"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-row class="content-fight">
    <ion-col class="left-team">
      <button ion-button icon-left clear full style="margin:0px;padding:0px;" color="light">
<ion-icon name="flag" color="danger"></ion-icon>
{{'HomeTeam' | trans}}
</button>
<a class="left-team-name">{{match?.home?.name}}</a>

</ion-col>

<ion-col class="center-score" width-25>
  <ion-row class="no-margin no-padding">
    <ion-col class="left-number">
      <div class="back-top"></div>
      <div class="back-bottom"></div>
      <ion-input type="number" class="top-score" [(ngModel)]="match.homeScore"></ion-input>
    </ion-col>
    <ion-col class="center-compare">
      :
    </ion-col>
    <ion-col class="right-number">
      <div class="back-top"></div>
      <div class="back-bottom"></div>
      <ion-input type="number" class="top-score" [(ngModel)]="match.awayScore"></ion-input>
    </ion-col>
  </ion-row>
</ion-col>

<ion-col class="right-team">
  <button ion-button icon-left clear full style="margin:0px;padding:0px;"color="light">
<ion-icon name="flag" color="primary"></ion-icon>
{{'AwayTeam' | trans}}
</button>
<a class="right-team-name">{{match?.away?.name}}</a>

</ion-col>
</ion-row>

<ion-list no-lines class="content-game-info">
  <ion-item class="game-info-item-light">
    <button ion-button clear full class="game-info-item-left" item-left>{{'Location' | trans}}</button>
    <div class="game-info-item-right-gray" item-right>
      {{match.location.name}}
      <!--<img src="assets/img/powered_by_google_on_non_white.png" style="margin-left: 10%"/>
<input id="autocompleteInput" [(ngModel)]="match.location.name" style="margin-left:10%;width:80%; border:none; text-align:center;" />-->
</div>
</ion-item>

<ion-item class="game-info-item">
  <button ion-button clear full class="game-info-item-left" item-left>{{'Date' | trans}}</button>
  <div class="game-info-item-right" item-right>
    <ion-datetime disabled='true' text-center displayFormat="YYYY-MM-DD" [min]="minDate" [(ngModel)]="matchDate"></ion-datetime>
  </div>
</ion-item>

<ion-item class="game-info-item-light">
  <button ion-button clear full class="game-info-item-left" item-left>{{'Time' | trans}}</button>
  <div class="game-info-item-right-gray" item-right>
    <ion-datetime disabled='true' text-center displayFormat="h:mm A" pickerFormat="h mm A" [(ngModel)]="matchTime"></ion-datetime>
  </div>
</ion-item>
<div *ngIf="match?.home?.captain == playerService.selfId()">
  <ion-item class="game-info-item-team-title">
    <button ion-button class="game-info-team-title-button">{{match?.home?.name}}
      </button>
  </ion-item>

  <ion-item class="game-info-item">
    <button ion-button item-left clear class="item-game-info-left-text">{{'participants' | trans}}</button>
    <button ion-button item-right clear icon-right class="item-game-info-right-text" (click)='choosePlayers(match.homeId, homePlayers)'>
        <ion-icon name="add-circle"></ion-icon>
      </button>
  </ion-item>

  <div class="content-expandable" *ngFor="let player of homePlayers">
    <ion-item class="expandable-member-name" (click)="clickTeamMember(player)">
      <button ion-button item-left icon-only clear (click)="deleteTeamPlayer(player, $event, homePlayers)">
          <ion-icon name="remove-circle" color="danger"></ion-icon>
        </button>
      <img [src]="player?.player?.photo" class="member-img" />
      <button ion-button item-right icon-right clear color="light">
          {{player?.player?.name}}
          <ion-icon [name]="player.expanded ? 'ios-arrow-up' : 'ios-arrow-down'"></ion-icon>
        </button>
    </ion-item>
    <!--<ion-item class="expandable-member-property" *ngFor="let item of player.items" [hidden]="player.hidden">-->
    <ion-item class="expandable-member-property" [hidden]="!player.expanded">
      <img src="assets/icon/b2.png" class="desc-img" item-left/>
      <button ion-button clear color="light">{{'Goals' | trans}}</button>
      <div item-right>
        <button [disabled]="player.goals <= 0" ion-button icon-only clear (click)="minus(player, 'goals')" color="light">
            <ion-icon name="arrow-dropleft"></ion-icon>
          </button>
        <button ion-button clear color="secondary">
            {{player.goals}}
          </button>
        <button ion-button icon-only clear (click)="plus(player, 'goals')">
            <ion-icon name="arrow-dropright" color="secondary"></ion-icon>
          </button>
      </div>
    </ion-item>
    <ion-item class="expandable-member-property" [hidden]="!player.expanded">
      <img src="assets/icon/b3.png" class="desc-img" item-left/>
      <button ion-button clear color="light">{{'Assists' | trans}}</button>
      <div item-right>
        <button [disabled]="player.assets <= 0" ion-button icon-only clear (click)="minus(player, 'assists')" color="light">
            <ion-icon name="arrow-dropleft"></ion-icon>
          </button>
        <button ion-button clear color="secondary">
            {{player.assists}}
          </button>
        <button ion-button icon-only clear (click)="plus(player,  'assists')">
            <ion-icon name="arrow-dropright" color="secondary"></ion-icon>
          </button>
      </div>
    </ion-item>
    <ion-item class="expandable-member-property" [hidden]="!player.expanded">
      <img src="assets/img/match_detail/yellowcard.png" class="desc-img" item-left/>
      <button ion-button clear color="light">{{'Yellowcard' | trans}}</button>
      <div item-right>
        <button [disabled]="player.yellows <= 0" ion-button icon-only clear (click)="minus(player, 'yellows')" color="light">
            <ion-icon name="arrow-dropleft"></ion-icon>
          </button>
        <button ion-button clear color="secondary">
            {{player.yellows}}
          </button>
        <button [disabled]="player.yellows > 1" ion-button icon-only clear (click)="plus(player, 'yellows')">
            <ion-icon name="arrow-dropright" color="secondary"></ion-icon>
          </button>
      </div>
    </ion-item>
    <ion-item class="expandable-member-property" [hidden]="!player.expanded">
      <img src="assets/img/match_detail/redcard.png" class="desc-img" item-left/>
      <button ion-button clear color="light">{{'Redcard' | trans}}</button>
      <div item-right>
        <button [disabled]="player.reds <= 0" ion-button icon-only clear (click)="minus(player, 'reds')" color="light">
            <ion-icon name="arrow-dropleft"></ion-icon>
          </button>
        <button ion-button clear color="secondary">
            {{player.reds}}
          </button>
        <button [disabled]="player.reds > 0" ion-button icon-only clear (click)="plus(player, 'reds')">
            <ion-icon name="arrow-dropright" color="secondary"></ion-icon>
          </button>
      </div>
    </ion-item>
  </div>
</div>

<div *ngIf="match?.away?.captain == playerService.selfId()">
  <ion-item class="game-info-item-team-title">
    <button ion-button class="game-info-team-title-button">{{match?.away?.name}}
      </button>
  </ion-item>

  <ion-item class="game-info-item">
    <button ion-button item-left clear class="item-game-info-left-text">{{'participants' | trans}}</button>
    <button ion-button item-right clear icon-right class="item-game-info-right-text" (click)='choosePlayers(match.awayId, awayPlayers)'>
        <ion-icon name="add-circle"></ion-icon>
      </button>
  </ion-item>
  <!--away-->
  <div class="content-expandable" *ngFor="let player of awayPlayers">
    <ion-item class="expandable-member-name" (click)="clickTeamMember(player)">
      <button ion-button item-left icon-only clear (click)="deleteTeamPlayer(player, $event, awayPlayers)">
          <ion-icon name="remove-circle" color="danger"></ion-icon>
        </button>
      <img [src]="player?.player?.photo" class="member-img" />
      <button ion-button item-right icon-right clear color="light">
          {{player?.player?.name}}
          <ion-icon [name]="player.expanded ? 'ios-arrow-up' : 'ios-arrow-down'"></ion-icon>
        </button>
    </ion-item>
    <ion-item class="expandable-member-property" [hidden]="!player.expanded">
      <img src="assets/icon/b2.png" class="desc-img" item-left/>
      <button ion-button clear color="light">{{'Goals' | trans}}</button>
      <div item-right>
        <button [disabled]="player.goals <= 0" ion-button icon-only clear (click)="minus(player, 'goals')" color="light">
            <ion-icon name="arrow-dropleft"></ion-icon>
          </button>
        <button ion-button clear color="secondary">
            {{player.goals}}
          </button>
        <button ion-button icon-only clear (click)="plus(player, 'goals')">
            <ion-icon name="arrow-dropright" color="secondary"></ion-icon>
          </button>
      </div>
    </ion-item>
    <ion-item class="expandable-member-property" [hidden]="!player.expanded">
      <img src="assets/icon/b3.png" class="desc-img" item-left/>
      <button ion-button clear color="light">{{'Assists' | trans}}</button>
      <div item-right>
        <button [disabled]="player.assets <= 0" ion-button icon-only clear (click)="minus(player, 'assists')" color="light">
            <ion-icon name="arrow-dropleft"></ion-icon>
          </button>
        <button ion-button clear color="secondary">
            {{player.assists}}
          </button>
        <button ion-button icon-only clear (click)="plus(player,  'assists')">
            <ion-icon name="arrow-dropright" color="secondary"></ion-icon>
          </button>
      </div>
    </ion-item>
    <ion-item class="expandable-member-property" [hidden]="!player.expanded">
      <img src="assets/img/match_detail/yellowcard.png" class="desc-img" item-left/>
      <button ion-button clear color="light">{{'Yellowcard' | trans}}</button>
      <div item-right>
        <button [disabled]="player.yellows <= 0" ion-button icon-only clear (click)="minus(player, 'yellows')" color="light">
            <ion-icon name="arrow-dropleft"></ion-icon>
          </button>
        <button ion-button clear color="secondary">
            {{player.yellows}}
          </button>
        <button [disabled]="player.yellows > 1" ion-button icon-only clear (click)="plus(player, 'yellows')">
            <ion-icon name="arrow-dropright" color="secondary"></ion-icon>
          </button>
      </div>
    </ion-item>
    <ion-item class="expandable-member-property" [hidden]="!player.expanded">
      <img src="assets/img/match_detail/redcard.png" class="desc-img" item-left/>
      <button ion-button clear color="light">{{'Redcard' | trans}}</button>
      <div item-right>
        <button [disabled]="player.reds <= 0" ion-button icon-only clear (click)="minus(player, 'reds')" color="light">
            <ion-icon name="arrow-dropleft"></ion-icon>
          </button>
        <button ion-button clear color="secondary">
            {{player.reds}}
          </button>
        <button [disabled]="player.reds > 0" ion-button icon-only clear (click)="plus(player, 'reds')">
            <ion-icon name="arrow-dropright" color="secondary"></ion-icon>
          </button>
      </div>
    </ion-item>
  </div>
</div>
<!--<ion-item class="game-info-item-dark">
      <button ion-button clear color="light" icon-left item-left="">
        <ion-icon name="star"></ion-icon>
        {{Re}}
      </button>

    </ion-item>

    <ion-item class="game-info-item-light" style="margin-bottom: 0px;">
      <button ion-button clear full class="game-info-item-left" item-left>姓&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;名
      </button>
      <ion-input type="text" style="height:100%;width: 100px;" item-right></ion-input>

    </ion-item>-->
</ion-list>
</ion-content>